<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><link rel="canonical" href="https://pinewood.team/epip/Documentation/Utilities/OOP/" />
      <link rel="shortcut icon" href="../../../img/favicon.ico" />
    <title>OOP - Epip Encounters</title>
    <link rel="stylesheet" href="../../../css/theme.css" />
    <link rel="stylesheet" href="../../../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/styles/github.min.css" />
        <link href="../../../css/extra.css" rel="stylesheet" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "OOP";
        var mkdocs_page_input_path = "Documentation\\Utilities\\OOP.md";
        var mkdocs_page_url = "/epip/Documentation/Utilities/OOP/";
      </script>
    
    <script src="../../../js/jquery-3.6.0.min.js" defer></script>
    <!--[if lt IE 9]>
      <script src="../../../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/highlight.min.js"></script>
      <script>hljs.initHighlightingOnLoad();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="../../.." class="icon icon-home"> Epip Encounters
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../..">Home</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../../patchnotes/">Patch Notes</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../../beta/">Beta Versions</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../../Info/faq/">FAQ</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">Features</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../../Features/UI/">UI improvements</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../Features/Vanity/">Vanity</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Documentation</span></p>
              <ul class="current">
                  <li class="toctree-l1"><a class="reference internal" href="../../../docs/">Introduction</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../Terminology/">Terminology</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../Global%20Tables/Epip/">Important Tables</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="#">Client</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../../Client/Pointer/">Pointer</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="#">Generic UI</a>
    <ul>
                <li class="toctree-l3"><a class="reference internal" href="../../Client/UI/Generic/Introduction/">Introduction</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="#">Elements</a>
    <ul>
                <li class="toctree-l4"><a class="reference internal" href="../../Client/UI/Generic/Elements/Element/">Element</a>
                </li>
                <li class="toctree-l4"><a class="reference internal" href="../../Client/UI/Generic/Elements/Button/">Button</a>
                </li>
                <li class="toctree-l4"><a class="reference internal" href="../../Client/UI/Generic/Elements/Color/">Color</a>
                </li>
                <li class="toctree-l4"><a class="reference internal" href="../../Client/UI/Generic/Elements/ComboBox/">ComboBox</a>
                </li>
    </ul>
                </li>
    </ul>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1 current"><a class="reference internal current" href="#">Utilities</a>
    <ul class="current">
                <li class="toctree-l2"><a class="reference internal" href="../Artifact/">Artifact</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../Character/">Character</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../Color/">Color</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../Combat/">Combat</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../GameState/">GameState</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../Item/">Item</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../Mod/">Mod</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../Net/">Net</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../Timer/">Timer</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../Text/">Text</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../Vector/">Vector</a>
                </li>
                <li class="toctree-l2 current"><a class="reference internal current" href="./">OOP</a>
    <ul class="current">
    </ul>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../Library/">Library</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../IO/">IO</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../Coroutine/">Coroutine</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../UserVars/">UserVars</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../Texture/">Texture</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../Pointer/">Pointer</a>
                </li>
    </ul>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Tutorials</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../../Tutorials/testing/">Testing</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Maintenance</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../../Maintenance/">Index</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../Maintenance/IDESetup/">IDE Setup</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../Maintenance/localization/">Localization</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../Maintenance/documentation/">Documentation</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../..">Epip Encounters</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../../.." class="icon icon-home" aria-label="Docs"></a> &raquo;</li>
          <li>Documentation &raquo;</li>
          <li>Utilities &raquo;</li>
      <li>OOP</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="oop">OOP<a class="headerlink" href="#oop" title="Permanent link">&para;</a></h1>
<p>The <code>OOP</code> library implements a OOP system that supports multiple inheritance.</p>
<p>A class is defined by a <em>class definition table</em>, passed onto <code>RegisterClass()</code> to initialize and register it. Classes to inherit from are defined during this call and cannot be changed afterwards. Instances of the classes will inherit keys from their class definition table.</p>
<p>Inheritance is done via metatables, however special logic is used to extend this functionality to allow for multiple inheritance.</p>
<p>If class A inherits from class B and C, indexing an instance (or the definition) of class A will:</p>
<ol>
<li>Check for the presence of the key within the instance/definition of A</li>
<li>Check for the presence of the key within each superclass, in order of inheritance established during <code>RegisterClass()</code> (from first to last). This is done recursively for any superclasses those classes might have.</li>
<li>Invoke <code>__index</code> of the class.</li>
</ol>
<p><strong>There is currently no support for multiple inheritance of metamethods.</strong> They will only be checked in the direct superclass.</p>
<p>There is no public constructor for classes by design; it is up to you to explicitly declare one. In Epip, these are typically called <code>Create()</code>. <code>__call</code> is not used for clarity reasons, as well as limitations in how it can be annotated (ex. no comments for parameters).</p>
<p>Constructors must call <code>ClassDefinition:__Create()</code> to create an instance. This method takes an optional table parameter; if present, that table will become the class instance, keeping any keys it had already set. This is typically also the parameter of the public constructor, so as to avoid bloating the constructor's formal parameters, instead providing them via a table. Within your constructor you may afterwards perform any initializations of your own as necessary.</p>
<p>As mentioned before, an instance must be of a single class type, and there are no public constructors; as a result, it is not possible to make an "anonymous" class that inherits from multiple classes. You must register an explicit class that inherits from the classes you want.</p>
<p>Class instances are of the <code>Class</code> type. This type provides several utility methods for type-checking.</p>
<p>When annotating your classes, be sure to make them inherit from <code>Class</code> to denote they use the OOP system as well as to expose the utility methods in the IDE.</p>
<p>Note that Feature has integration with this library that allows registering and fetching classes related to the feature itself. If working with features, their calls should be used instead, as they will likely get automatic namespacing in the future. Currently, class names must be unique, lest new registrations will overwrite the previous definition.</p>
<p><doc class="OOPLib"></p>
<h1 id="ooplib-class">OOPLib Class<a class="headerlink" href="#ooplib-class" title="Permanent link">&para;</a></h1>
<h2 id="methods">Methods<a class="headerlink" href="#methods" title="Permanent link">&para;</a></h2>
<h5 id="getclass">GetClass<a class="headerlink" href="#getclass" title="Permanent link">&para;</a></h5>
<pre><code class="language-lua">function OOPLib.GetClass(className)
   -&gt; `T`
</code></pre>
<p>Returns the base table for a class.</p>
<p>Throws if the class is not registered.</p>
<p style="margin-bottom:0px;"><span style="color:#B04A6E;"><b><i>@param</i></b></span> <b>className</b> <code>`T`</code></p>

<h5 id="isclass">IsClass<a class="headerlink" href="#isclass" title="Permanent link">&para;</a></h5>
<pre><code class="language-lua">function OOPLib.IsClass(tbl, className)
   -&gt; boolean
</code></pre>
<p>Returns whether a table is a class table or instance.</p>
<p style="margin-bottom:0px;"><span style="color:#B04A6E;"><b><i>@param</i></b></span> <b>tbl</b> <code>table</code></p>

<p style="margin-bottom:0px;"><span style="color:#B04A6E;"><b><i>@param</i></b></span> <b>className</b> <code>string?</code> If present, `true` will only be returned if the table *is* the requested class.</p>

<h5 id="registerclass">RegisterClass<a class="headerlink" href="#registerclass" title="Permanent link">&para;</a></h5>
<pre><code class="language-lua">function OOPLib.RegisterClass(className, class, parentClasses)
   -&gt; `T`
</code></pre>
<p>Registers a class.</p>
<p style="margin-bottom:0px;"><span style="color:#B04A6E;"><b><i>@param</i></b></span> <b>className</b> <code>string|`T`</code></p>

<p style="margin-bottom:0px;"><span style="color:#B04A6E;"><b><i>@param</i></b></span> <b>class</b> <code>table</code></p>

<p style="margin-bottom:0px;"><span style="color:#B04A6E;"><b><i>@param</i></b></span> <b>parentClasses</b> <code>string[]?</code> Classes this one inherits from.</p>

<h5 id="setmetatable">SetMetatable<a class="headerlink" href="#setmetatable" title="Permanent link">&para;</a></h5>
<pre><code class="language-lua">function OOPLib.SetMetatable(table, metatable)
</code></pre>
<p>Sets a table's metatable. __index is set to index the metatable itself, using the metatable's __index as a fallback.</p>
<p style="margin-bottom:0px;"><span style="color:#B04A6E;"><b><i>@param</i></b></span> <b>table</b> <code>table</code> Mutated.</p>

<p style="margin-bottom:0px;"><span style="color:#B04A6E;"><b><i>@param</i></b></span> <b>metatable</b> <code>table</code></p>
<p></doc></p>
<p><doc class="Class"></p>
<h1 id="class-class">Class Class<a class="headerlink" href="#class-class" title="Permanent link">&para;</a></h1>
<h2 id="methods_1">Methods<a class="headerlink" href="#methods_1" title="Permanent link">&para;</a></h2>
<h5 id="getclassdefinition">GetClassDefinition<a class="headerlink" href="#getclassdefinition" title="Permanent link">&para;</a></h5>
<pre><code class="language-lua">function Class:GetClassDefinition()
   -&gt; Class
</code></pre>
<p>Returns the main table that defines this class instance.</p>
<h5 id="getclassname">GetClassName<a class="headerlink" href="#getclassname" title="Permanent link">&para;</a></h5>
<pre><code class="language-lua">function Class:GetClassName()
   -&gt; string
</code></pre>
<p>Returns the name of the class.</p>
<h5 id="getparentclasses">GetParentClasses<a class="headerlink" href="#getparentclasses" title="Permanent link">&para;</a></h5>
<pre><code class="language-lua">function Class:GetParentClasses()
   -&gt; Class[]
</code></pre>
<p>Returns the parent classes of the class.</p>
<h5 id="implementsclass">ImplementsClass<a class="headerlink" href="#implementsclass" title="Permanent link">&para;</a></h5>
<pre><code class="language-lua">function Class:ImplementsClass(className)
   -&gt; boolean
</code></pre>
<p>Returns whether this class implements another.</p>
<p>Hierarchies are considered.</p>
<p style="margin-bottom:0px;"><span style="color:#B04A6E;"><b><i>@param</i></b></span> <b>className</b> <code>string</code></p>

<h5 id="__create">__Create<a class="headerlink" href="#__create" title="Permanent link">&para;</a></h5>
<pre><code class="language-lua">---@protected
function Class:__Create(data)
   -&gt; Class
</code></pre>
<p>Creates a new instance of the class.</p>
<p style="margin-bottom:0px;"><span style="color:#B04A6E;"><b><i>@param</i></b></span> <b>data</b> <code>table?</code> Table with the initial fields of the instance.</p>
<p></doc></p>
              
            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href="../Vector/" class="btn btn-neutral float-left" title="Vector"><span class="icon icon-circle-arrow-left"></span> Previous</a>
        <a href="../Library/" class="btn btn-neutral float-right" title="Library">Next <span class="icon icon-circle-arrow-right"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
      <span><a href="../Vector/" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="../Library/" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script>var base_url = '../../..';</script>
    <script src="../../../js/theme_extra.js" defer></script>
    <script src="../../../js/theme.js" defer></script>
      <script src="../../../search/main.js" defer></script>
    <script defer>
        window.onload = function () {
            SphinxRtdTheme.Navigation.enable(true);
        };
    </script>

</body>
</html>
